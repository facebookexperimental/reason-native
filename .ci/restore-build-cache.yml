steps:
  - task: DownloadBuildArtifacts@0
    condition: succeeded()
    displayName: 'Cache: Restore install'
    inputs:
        buildType: 'specific'
        project: '$(System.TeamProject)'
        pipeline: '$(Build.DefinitionName)'
        branchName: '$(Build.SourceBranch)'
        buildVersionToDownload: 'latestFromBranch'
        downloadType: 'single'
        artifactName: 'cache-$(Agent.OS)-install'
        downloadPath: '$(System.ArtifactsDirectory)'
    continueOnError: true

  - task: ExtractFiles@1
    condition: succeeded()
    displayName: 'Cache: Unzip install'
    inputs:
      archiveFilePatterns: '$(System.ArtifactsDirectory)/cache-$(Agent.OS)-install/cache.zip'
      destinationFolder: '$(ESY__CACHE_INSTALL_PATH)'
